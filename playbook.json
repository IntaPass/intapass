[{"name": "Add SSH Key", "hosts": ["webservers"], "gather_facts": "no", "tasks": [{"name": "Make sure we have a 'team' group", "group": {"name": "team", "state": "present"}}, {"name": "Allow 'team' group to have passwordless sudo", "lineinfile": {"dest": "/etc/sudoers", "state": "present", "regexp": "^%team", "line": "%team ALL=(ALL) NOPASSWD: ALL", "validate": "visudo -cf %s"}}, {"name": "Add sudoers users to team group", "user": "name=felix groups=team append=yes state=present createhome=yes"}, {"name": "Set up authorized keys for the felix user", "authorized_key": "user=felix key=\"{{item}}\"", "with_file": ["files/felix.pub"]}]}]